<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spooky Halloween Experience</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: #000;
            color: #fff;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .video-container video {
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: cover;
        }
        
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: -1;
        }
        
        .content {
            position: relative;
            z-index: 1;
            padding: 15px;
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            justify-content: space-between;
        }
        
        .header {
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            color: #ff7518;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #ff9518;
            margin-bottom: 20px;
        }
        
        .audio-section {
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            justify-content: center;
        }
        
        .audio-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .audio-icon {
            width: 60px;
            height: 60px;
            cursor: pointer;
            transition: transform 0.3s;
            filter: drop-shadow(0 0 8px rgba(255, 117, 24, 0.7));
        }
        
        .audio-icon:hover {
            transform: scale(1.1);
        }
        
        .subtitles-container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .subtitles {
            background-color: rgba(0, 0, 0, 0.75);
            padding: 20px;
            border-radius: 10px;
            font-size: 1.3rem;
            line-height: 1.6;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #ff7518;
            box-shadow: 0 0 20px rgba(255, 117, 24, 0.5);
            margin-bottom: 30px;
        }
        
        .sentence {
            display: none;
            text-align: center;
            width: 100%;
        }
        
        .sentence.active {
            display: block;
        }
        
        .word {
            opacity: 0.5;
            transition: opacity 0.3s, color 0.3s, text-shadow 0.3s;
            display: inline-block;
            margin: 0 2px;
        }
        
        .word.active {
            opacity: 1;
            color: #ff9518;
            text-shadow: 0 0 8px rgba(255, 149, 24, 0.9);
        }
        
        .progress-container {
            width: 100%;
            max-width: 600px;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin: 20px auto;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: #ff7518;
            width: 0%;
            transition: width 0.1s;
        }
        
        .time-display {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 600px;
            margin: 0 auto 20px;
            font-size: 0.9rem;
            color: #ccc;
        }
        
        footer {
            padding: 15px;
            text-align: center;
            font-size: 0.9rem;
            color: #ccc;
            margin-top: auto;
        }
        
        /* Адаптация для мобильных устройств */
        @media (max-width: 768px) {
            .content {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .audio-icon {
                width: 50px;
                height: 50px;
            }
            
            .subtitles {
                font-size: 1.1rem;
                padding: 15px;
                min-height: 100px;
            }
            
            .progress-container {
                max-width: 90%;
            }
            
            .time-display {
                max-width: 90%;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 0.9rem;
            }
            
            .subtitles {
                font-size: 1rem;
                padding: 12px;
                min-height: 90px;
            }
            
            .audio-icon {
                width: 45px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <div class="video-container">
        <video autoplay muted loop id="backgroundVideo">
            <source src="Photos/InShot_20251019_203914201.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="overlay"></div>
    </div>
    
    <div class="content">
        <div class="header">
            <h1>Spooky Halloween Experience</h1>
            <div class="subtitle">Trick or treat? The choice is yours!</div>
        </div>
        
        <div class="audio-section">
            <div class="audio-controls">
                <img src="Photos/IMG_20251020_193449_767.png" alt="Audio Icon" class="audio-icon" id="audioIcon">
                <audio id="halloweenAudio">
                    <source src="Photos/2025-10-20-005529_108601.mp3" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="time-display">
                <span id="currentTime">0:00</span>
                <span id="duration">0:00</span>
            </div>
            
            <div class="subtitles-container">
                <div class="subtitles" id="subtitles">
                    <!-- Subtitles will appear here -->
                </div>
            </div>
        </div>
        
        <footer>
            <p>Halloween Project - Spooky Fun!</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const audio = document.getElementById('halloweenAudio');
            const audioIcon = document.getElementById('audioIcon');
            const subtitles = document.getElementById('subtitles');
            const progressBar = document.getElementById('progressBar');
            const currentTimeElement = document.getElementById('currentTime');
            const durationElement = document.getElementById('duration');
            const video = document.getElementById('backgroundVideo');
            
            // Тексты субтитров с временными метками (в секундах)
            const subtitleData = [
                { start: 0, end: 8, text: "Hello, friends! Halloween is a special day some people celebrate every year. Can you tell me anything about Halloween?" },
                { start: 8, end: 16, text: "When people celebrate Halloween, they put a light inside a pumpkin to make it shine. Do you know the word for that light? It is called a candle." },
                { start: 16, end: 24, text: "A jack-o'-lantern is a carved pumpkin lantern traditionally associated with Halloween. If you met a talking pumpkin, what would you ask it in a simple question? Have you ever drawn a pumpkin or a ghost? Tell me about your drawing." },
                { start: 24, end: 32, text: 'Do you know what the phrase "trick or treat" means? Trick-or-treating is a popular Halloween tradition where children dress up in costumes and go door to door in their neighborhoods, saying the phrase "trick or treat."' },
                { start: 32, end: 40, text: 'The phrase means that the children are asking for a treat, usually candy, and if they don\'t get one, they might play a small trick on the homeowner. This custom is a fun part of Halloween celebrations when kids collect sweets from their neighbours.' },
                { start: 40, end: 48, text: "Halloween costumes are a big part of the fun during Halloween celebrations. Children love to dress up as their favourite movie characters or spooky creatures. If you could choose any Halloween costume, what would it be?" }
            ];
            
            let currentSubtitleIndex = -1;
            let wordInterval;
            
            // Форматирование времени в мм:сс
            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            }
            
            // Обновление прогресс-бара и времени
            function updateProgress() {
                if (audio.duration) {
                    const progress = (audio.currentTime / audio.duration) * 100;
                    progressBar.style.width = `${progress}%`;
                    currentTimeElement.textContent = formatTime(audio.currentTime);
                }
            }
            
            // Создание элементов для субтитров
            function createSubtitles() {
                subtitles.innerHTML = '';
                
                subtitleData.forEach((data, index) => {
                    const sentenceDiv = document.createElement('div');
                    sentenceDiv.className = 'sentence';
                    sentenceDiv.id = `sentence-${index}`;
                    
                    // Разбиваем текст на слова и создаем спаны для каждого
                    const words = data.text.split(' ');
                    words.forEach(word => {
                        const wordSpan = document.createElement('span');
                        wordSpan.className = 'word';
                        wordSpan.textContent = word + ' ';
                        sentenceDiv.appendChild(wordSpan);
                    });
                    
                    subtitles.appendChild(sentenceDiv);
                });
            }
            
            // Показать субтитры для текущего времени
            function showSubtitlesForTime(currentTime) {
                // Находим активный субтитр для текущего времени
                const activeIndex = subtitleData.findIndex(data => 
                    currentTime >= data.start && currentTime < data.end
                );
                
                // Если нашли новый активный субтитр
                if (activeIndex !== -1 && activeIndex !== currentSubtitleIndex) {
                    // Скрываем предыдущий активный субтитр
                    if (currentSubtitleIndex !== -1) {
                        const prevSentence = document.getElementById(`sentence-${currentSubtitleIndex}`);
                        if (prevSentence) {
                            prevSentence.classList.remove('active');
                            // Сбрасываем подсветку слов
                            const words = prevSentence.querySelectorAll('.word');
                            words.forEach(word => word.classList.remove('active'));
                        }
                    }
                    
                    // Показываем новый активный субтитр
                    currentSubtitleIndex = activeIndex;
                    const currentSentence = document.getElementById(`sentence-${currentSubtitleIndex}`);
                    if (currentSentence) {
                        currentSentence.classList.add('active');
                        
                        // Запускаем подсветку слов для этого предложения
                        highlightWordsForSentence(currentSubtitleIndex, currentTime);
                    }
                } else if (activeIndex !== -1) {
                    // Обновляем подсветку слов для текущего предложения
                    highlightWordsForSentence(activeIndex, currentTime);
                } else if (currentSubtitleIndex !== -1) {
                    // Скрываем субтитры, если время вне диапазонов
                    const currentSentence = document.getElementById(`sentence-${currentSubtitleIndex}`);
                    if (currentSentence) {
                        currentSentence.classList.remove('active');
                        const words = currentSentence.querySelectorAll('.word');
                        words.forEach(word => word.classList.remove('active'));
                    }
                    currentSubtitleIndex = -1;
                }
            }
            
            // Подсветка слов в предложении
            function highlightWordsForSentence(sentenceIndex, currentTime) {
                const sentence = document.getElementById(`sentence-${sentenceIndex}`);
                if (!sentence) return;
                
                const words = sentence.querySelectorAll('.word');
                const subtitle = subtitleData[sentenceIndex];
                const sentenceDuration = subtitle.end - subtitle.start;
                const timeInSentence = currentTime - subtitle.start;
                const progress = timeInSentence / sentenceDuration;
                
                // Вычисляем, какое слово должно быть активным
                const activeWordIndex = Math.floor(progress * words.length);
                
                // Сбрасываем все слова
                words.forEach(word => word.classList.remove('active'));
                
                // Подсвечиваем слова до активного индекса
                for (let i = 0; i <= activeWordIndex && i < words.length; i++) {
                    words[i].classList.add('active');
                }
            }
            
            // Инициализация
            function init() {
                createSubtitles();
                
                // Устанавливаем общую длительность, когда метаданные загружены
                audio.addEventListener('loadedmetadata', function() {
                    durationElement.textContent = formatTime(audio.duration);
                });
                
                // Обновление времени и прогресса
                audio.addEventListener('timeupdate', function() {
                    updateProgress();
                    showSubtitlesForTime(audio.currentTime);
                });
                
                // Сброс при завершении аудио
                audio.addEventListener('ended', function() {
                    progressBar.style.width = '0%';
                    currentTimeElement.textContent = '0:00';
                    
                    // Сбрасываем субтитры
                    if (currentSubtitleIndex !== -1) {
                        const currentSentence = document.getElementById(`sentence-${currentSubtitleIndex}`);
                        if (currentSentence) {
                            currentSentence.classList.remove('active');
                            const words = currentSentence.querySelectorAll('.word');
                            words.forEach(word => word.classList.remove('active'));
                        }
                        currentSubtitleIndex = -1;
                    }
                });
                
                // Переключение воспроизведения аудио
                audioIcon.addEventListener('click', function() {
                    if (audio.paused) {
                        audio.play();
                        video.play(); // На всякий случай запускаем видео, если оно остановилось
                    } else {
                        audio.pause();
                    }
                });
                
                // Прогресс-бар можно кликнуть для перемотки
                progressBar.parentElement.addEventListener('click', function(e) {
                    const rect = this.getBoundingClientRect();
                    const percent = (e.clientX - rect.left) / rect.width;
                    audio.currentTime = percent * audio.duration;
                });
            }
            
            // Запускаем инициализацию
            init();
        });
    </script>
</body>
</html>
