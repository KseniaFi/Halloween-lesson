<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maplewood Halloween Festival - Booklet</title>
    <style>
        /* Основные стили для веб-отображения */
        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
            background-color: #f9f9f9;
        }
        
        h1 {
            color: #8B4513;
            text-align: center;
            border-bottom: 2px solid #8B4513;
            padding-bottom: 10px;
        }
        
        .image-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .image-caption {
            font-style: italic;
            color: #666;
            margin-top: 5px;
        }
        
        .download-btn {
            display: block;
            width: 200px;
            margin: 30px auto;
            padding: 12px 20px;
            background-color: #FF8C00;
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.3s;
            cursor: pointer;
        }
        
        .download-btn:hover {
            background-color: #E67E00;
        }
        
        /* Стили для книжечки в PDF */
        @media print {
            @page {
                size: A5;
                margin: 0.5in;
            }
            
            body {
                max-width: none;
                padding: 0;
                font-size: 11pt;
                line-height: 1.5;
                background: white;
                color: #333;
            }
            
            /* Стиль для обложки */
            .cover-page {
                page: cover;
                text-align: center;
                padding-top: 2in;
            }
            
            .cover-page h1 {
                font-size: 28pt;
                color: #8B4513;
                border: none;
                margin-bottom: 0.5in;
            }
            
            .cover-page .subtitle {
                font-size: 14pt;
                font-style: italic;
                color: #666;
                margin-top: 1in;
            }
            
            /* Стиль для обычных страниц */
            .page {
                page-break-after: always;
                min-height: 100vh;
                padding: 0.5in;
                box-sizing: border-box;
            }
            
            /* Развороты для левых и правых страниц */
            .page:nth-child(odd) {
                /* Левая страница */
                border-right: 1px dashed #ccc;
            }
            
            .page:nth-child(even) {
                /* Правая страница */
                border-left: 1px dashed #ccc;
            }
            
            /* Предотвращение разрывов внутри важных элементов */
            .page-break-avoid {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            
            /* Принудительный разрыв страницы перед элементом */
            .page-break-before {
                page-break-before: always;
                break-before: page;
            }
            
            /* Предотвращение висячих строк */
            p {
                orphans: 3;
                widows: 3;
            }
            
            /* Управление размерами изображений для PDF */
            .image-container img {
                max-height: 3in;
                object-fit: contain;
            }
            
            /* Нумерация страниц */
            .page-number {
                position: absolute;
                bottom: 0.3in;
                width: 100%;
                text-align: center;
                font-size: 10pt;
                color: #666;
            }
            
            /* Скрыть кнопку скачивания в PDF */
            .download-btn {
                display: none;
            }
        }
        
        /* Дополнительные классы для управления разрывами страниц */
        .content-section {
            margin-bottom: 20px;
        }
        
        .page-break-before {
            page-break-before: always;
        }
    </style>
</head>
<body>
    <div class="page cover-page">
        <h1>The Halloween Festival<br>in Maplewood</h1>
        <div class="subtitle">A Story of Magic and Friendship</div>
    </div>
    
    <div class="page">
        <div class="content-section page-break-avoid">
            <p>The village of Maplewood is a charming little community known for its friendly people and beautiful natural surroundings. Every autumn, Maplewood transforms into a magical world, bursting with colours and joyful sounds. This special season brings everyone together to celebrate Halloween with fun and festive traditions.</p>
            
            <div class="image-container page-break-avoid">
                <img src="https://via.placeholder.com/500x300/8B4513/FFFFFF?text=Maplewood+Village+in+Autumn" alt="Maplewood village during autumn">
                <div class="image-caption">Maplewood village during autumn</div>
            </div>
        </div>
        
        <div class="content-section page-break-avoid">
            <p>The festival's decorations light up the streets, and children's excitement grows as they prepare their costumes. Bright orange pumpkins are placed on every doorstep, and flickering lanterns light up the village hall.</p>
            
            <div class="image-container page-break-avoid">
                <img src="https://via.placeholder.com/500x300/FF8C00/FFFFFF?text=Festival+Decorations" alt="Festival decorations">
                <div class="image-caption">Festival decorations</div>
            </div>
        </div>
        
        <div class="page-number">1</div>
    </div>
    
    <div class="page">
        <div class="content-section page-break-avoid">
            <p>Mia and her brother Tom spend the afternoon carefully arranging their granny's large, bright pumpkins to prepare them for carving. Granny's pumpkins are big and bright, perfect for carving scary faces.</p>
            
            <div class="image-container page-break-avoid">
                <img src="https://via.placeholder.com/500x300/FF4500/FFFFFF?text=Mia+and+Tom+with+Pumpkins" alt="Mia and Tom with pumpkins">
                <div class="image-caption">Mia and Tom with pumpkins</div>
            </div>
        </div>
        
        <div class="content-section page-break-avoid">
            <p>The village's pumpkin competition is the most popular event, and everyone hopes to win Granny's special prize. At the festival, there are many fun activities. Children can carve pumpkins, paint their faces, or make sparkling cobweb decorations.</p>
            
            <div class="image-container page-break-avoid">
                <img src="https://via.placeholder.com/500x300/32CD32/FFFFFF?text=Pumpkin+Carving+Activity" alt="Pumpkin carving activity">
                <div class="image-caption">Pumpkin carving activity</div>
            </div>
        </div>
        
        <div class="page-number">2</div>
    </div>
    
    <div class="page">
        <div class="content-section page-break-avoid">
            <p>The storyteller shares tales of friendly witches and magical pumpkins. The wizard's staff glows softly as the children listen carefully.</p>
            
            <div class="image-container page-break-avoid">
                <img src="https://via.placeholder.com/500x300/9932CC/FFFFFF?text=Storyteller+with+Children" alt="Storyteller with children">
                <div class="image-caption">Storyteller with children</div>
            </div>
        </div>
        
        <div class="content-section page-break-avoid">
            <p>Lantern bearers walk through the village carrying glowing lanterns shaped like bats, ghosts, and witches' hats. Music plays as the parade moves past the school and the old library.</p>
            
            <div class="image-container page-break-avoid">
                <img src="https://via.placeholder.com/500x300/1E90FF/FFFFFF?text=Lantern+Parade" alt="Lantern parade">
                <div class="image-caption">Lantern parade</div>
            </div>
        </div>
        
        <div class="page-number">3</div>
    </div>
    
    <div class="page">
        <div class="content-section page-break-avoid">
            <p>The festival's magic fills the air, making everyone feel happy and brave. At the end of the night, fireworks light up the sky with orange, purple, and green colours. The village's Halloween festival is a night full of joy, magic, and friendship.</p>
            
            <div class="image-container page-break-avoid">
                <img src="https://via.placeholder.com/500x300/FF1493/FFFFFF?text=Fireworks+Display" alt="Fireworks display">
                <div class="image-caption">Fireworks display</div>
            </div>
        </div>
        
        <div class="content-section" style="text-align: center; margin-top: 1in;">
            <p><strong>The End</strong></p>
            <p style="font-style: italic; color: #666;">Thank you for reading our Halloween story</p>
        </div>
        
        <div class="page-number">4</div>
    </div>
    
    <button class="download-btn" onclick="generatePDF()">Download Booklet as PDF</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        function generatePDF() {
            const element = document.body;
            
            // Опции для создания PDF в формате книжечки
            const opt = {
                margin: [0.5, 0.5, 0.5, 0.5], // верх, правый, низ, левый
                filename: 'Maplewood_Halloween_Booklet.pdf',
                image: { 
                    type: 'jpeg', 
                    quality: 0.98 
                },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    logging: false
                },
                jsPDF: { 
                    unit: 'in', 
                    format: 'a5', 
                    orientation: 'portrait' 
                },
                // Настройки для книжечки
                pagebreak: { 
                    mode: ['avoid-all', 'css', 'legacy'] 
                }
            };
            
            // Создаем PDF
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>
